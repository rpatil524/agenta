@host = http://localhost
@token = replace-me
@base_url = {{host}}/api/preview/tools

###
# @name create_account
POST {{host}}/api/admin/account
Content-Type: application/json
Authorization: Access {{token}}

{
  "user": {
    "name": "test_user",
    "email": "test@agenta.ai"
  },
  "scope": {
    "name": "Agenta (test)"
  }
}

###
@authorization = {{create_account.response.body.scopes[0].credentials}}

# =====================================================================
# TOOL QUERY (action x connection expansion)
# =====================================================================

###
# @name query_tools_all
# Query all tools (actions x connections) â€” returns only connected tools by default
POST {{base_url}}/query
Content-Type: application/json
Authorization: {{authorization}}

{}

###
# @name query_tools_include_unconnected
# Include actions that have no connections yet
POST {{base_url}}/query
Content-Type: application/json
Authorization: {{authorization}}

{
  "flags": {
    "connected": false
  }
}

###
# @name query_tools_gmail
# Query tools for a specific integration
POST {{base_url}}/query
Content-Type: application/json
Authorization: {{authorization}}

{
  "provider_key": "composio",
  "integration_key": "gmail",
  "flags": {
    "connected": false
  }
}

###
# @name query_tools_github_connected
# Query only connected GitHub tools
POST {{base_url}}/query
Content-Type: application/json
Authorization: {{authorization}}

{
  "provider_key": "composio",
  "integration_key": "github"
}

###
# @name query_tools_by_slug
# Query a specific tool by full slug
POST {{base_url}}/query
Content-Type: application/json
Authorization: {{authorization}}

{
  "slug": "tools.composio.gmail.SEND_EMAIL"
}

###
# @name query_tools_windowing
# Query with limit/offset (cursor pagination)
POST {{base_url}}/query
Content-Type: application/json
Authorization: {{authorization}}

{
  "provider_key": "composio",
  "flags": {
    "connected": false
  },
  "windowing": {
    "limit": 5
  }
}
